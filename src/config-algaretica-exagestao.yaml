name: "algaretica-exagestao"
description: "Importação Algaretica ExaGestão"

source:
  type: "CSV"
  settings:
    FilePath: "/users/felipeseho/Desktop/bases/amostra-px-algaretica-exagestao-v2.csv"
    Delimiter: ","
    StartLine: 1
    MaxLines: 1000

destination:
  type: "API"
  settings:
    EndpointUrl: "https://test-seho.requestcatcher.com/"
    Method: "POST"
    Timeout: 30
    RetryAttempts: 3
    RetryDelaySeconds: 5
    MaxRequestsPerSecond: 20
    FieldMapping:
      event: "=subscription_create"
      eventDate: "start_date"
      partner: "=brisanet"
      path: "=/api/v1/events/ingest"
      payload.campaign: "campaign"
      payload.cpf: "cpf"
      payload.cnpj: "cnpj"
      payload.email: "email"
      payload.msisdn: "msisdn"
      payload.subscriptionId: "subscription_id"

processing:
  LogDirectory: "logs"
  CheckpointDirectory: "checkpoints"
  CheckpointIntervalSeconds: 30

transforms:
  - Field: "email"
    Type: "ToLower"
  - Field: "campaign"
    Type: "ToLower"
